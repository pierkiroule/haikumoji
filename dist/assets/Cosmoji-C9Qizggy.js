import{r as o,j as e,m as d,c as N,d as k,o as w,p as v}from"./index-BMx-jIoL.js";import{P as M}from"./PantheonModal-Dbj6cfe2.js";import{E as C}from"./EmojiNetwork-yPqfa2Dd.js";import{u as x}from"./use-reduced-motion-ClV6aqu3.js";function p({size:c=28,className:l=""}){const s=c,n=Math.max(2,Math.round(c/14)),t=o.useMemo(()=>({root:{width:s,height:s},ring:{borderWidth:n},dot:{fontSize:Math.round(s*.42),left:Math.round(s*.32),top:Math.round(s*.3)},degree:{fontSize:Math.round(s*.36),left:Math.round(s*.58),top:Math.round(s*.08)},sparkle1:{right:-Math.round(s*.14),top:Math.round(s*.35)},sparkle2:{right:-Math.round(s*.28),top:-Math.round(s*.06)},sparkle3:{right:-Math.round(s*.04),bottom:-Math.round(s*.02)}}),[s,n]);return e.jsxs("span",{className:`relative inline-block align-middle cosmoji-emblem ${l}`,style:t.root,"aria-hidden":"true",children:[e.jsx("style",{children:`
        .cosmoji-emblem .cosmoji-ring { 
          position: absolute; inset: 0; border-radius: 9999px; 
          border-style: solid; border-color: rgba(2, 6, 23, 0.2); /* slate-950/20 on white */
          box-shadow: 0 0 0 1px rgba(15, 23, 42, 0.06) inset;
          background: radial-gradient(closest-side, rgba(2,6,23,0.02), transparent);
        }
        .dark .cosmoji-emblem .cosmoji-ring {
          border-color: rgba(255,255,255,0.25);
          box-shadow: 0 0 0 1px rgba(255,255,255,0.06) inset;
          background: radial-gradient(closest-side, rgba(255,255,255,0.04), transparent);
        }
        .cosmoji-emblem .glyph { position: absolute; line-height: 1; color: #0f172a; opacity: 0.9; }
        .dark .cosmoji-emblem .glyph { color: #e2e8f0; }

        .cosmoji-emblem .sparkle { 
          position: absolute; color: #0891b2; /* cyan-700 */
          filter: drop-shadow(0 0 2px rgba(34,211,238,0.6));
          animation: cosmoji-sparkle 2.4s ease-in-out infinite;
          transform-origin: left center;
          font-size: ${Math.max(10,Math.round(s*.34))}px;
          opacity: 0;
        }
        .cosmoji-emblem .sparkle:nth-of-type(1) { animation-delay: 0s; }
        .cosmoji-emblem .sparkle:nth-of-type(2) { animation-delay: 0.6s; color: #06b6d4; }
        .cosmoji-emblem .sparkle:nth-of-type(3) { animation-delay: 1.2s; color: #22d3ee; }

        @keyframes cosmoji-sparkle {
          0%   { transform: translateX(0px) scale(0.6) rotate(0deg); opacity: 0; }
          10%  { opacity: 0.9; }
          45%  { transform: translateX(${Math.round(s*.38)}px) scale(1) rotate(12deg); opacity: 0.85; }
          70%  { opacity: 0.3; }
          100% { transform: translateX(${Math.round(s*.7)}px) scale(0.9) rotate(22deg); opacity: 0; }
        }
        @media (prefers-reduced-motion: reduce) {
          .cosmoji-emblem .sparkle { animation: none; opacity: 0.25; }
        }
      `}),e.jsx("span",{className:"cosmoji-ring",style:t.ring}),e.jsx("span",{className:"glyph",style:t.dot,children:"•"}),e.jsx("span",{className:"glyph",style:t.degree,children:"°"}),e.jsx("span",{className:"sparkle",style:t.sparkle1,children:"✦"}),e.jsx("span",{className:"sparkle",style:t.sparkle2,children:"✦"}),e.jsx("span",{className:"sparkle",style:t.sparkle3,children:"✦"})]})}function T({active:c=!1,height:l=240,opacity:s=.6}){const n=x(),t=n?{duration:0}:{duration:12,repeat:1/0,ease:"easeInOut",repeatType:"mirror"};return e.jsx("div",{className:"pointer-events-none absolute inset-x-0 top-0 -z-10 overflow-hidden",style:{height:l},"aria-hidden":!0,children:e.jsxs(d.div,{initial:{opacity:0},animate:{opacity:c?s:0},transition:{duration:n?0:.6,ease:"easeOut"},className:"absolute inset-0",children:[e.jsx(d.span,{className:"absolute -inset-x-10 -top-10 h-[200%] mix-blend-screen",style:{background:"linear-gradient(120deg, rgba(52,211,153,0.55), rgba(45,212,191,0.35) 40%, rgba(59,130,246,0.30) 70%, rgba(167,139,250,0.25))",filter:"blur(48px)"},initial:!1,animate:n?{x:0}:{x:[-40,40,-40]},transition:{...t,duration:16}}),e.jsx(d.span,{className:"absolute -inset-x-20 top-0 h-[180%] mix-blend-screen",style:{background:"linear-gradient(100deg, rgba(56,189,248,0.42), rgba(99,102,241,0.28))",filter:"blur(56px)"},initial:!1,animate:n?{x:0}:{x:[30,-30,30]},transition:{...t,duration:20}}),e.jsx(d.span,{className:"absolute -inset-x-24 -top-12 h-[200%] mix-blend-screen",style:{background:"linear-gradient(140deg, rgba(244,114,182,0.18), rgba(192,132,252,0.18))",filter:"blur(72px)"},initial:!1,animate:n?{x:0}:{x:[-20,20,-20]},transition:{...t,duration:24}})]})})}const E=[{id:"🌬️",element:"air",occurrence:0},{id:"❄️",element:"ice",occurrence:0},{id:"🐋",element:"animal",occurrence:0},{id:"🌊",element:"water",occurrence:0},{id:"🔥",element:"fire",occurrence:0},{id:"🌙",element:"light",occurrence:0},{id:"🛶",element:"earth",occurrence:0},{id:"🌌",element:"aurora",occurrence:0},{id:"🧊",element:"ice",occurrence:0},{id:"🌈",element:"light",occurrence:0},{id:"🐚",element:"water",occurrence:0},{id:"🪶",element:"air",occurrence:0},{id:"🌞",element:"light",occurrence:0},{id:"💧",element:"water",occurrence:0},{id:"🌿",element:"earth",occurrence:0},{id:"🍂",element:"earth",occurrence:0},{id:"🌑",element:"light",occurrence:0},{id:"☁️",element:"air",occurrence:0},{id:"🦭",element:"animal",occurrence:0},{id:"🪵",element:"earth",occurrence:0},{id:"🌕",element:"light",occurrence:0},{id:"🌠",element:"light",occurrence:0},{id:"🌧️",element:"water",occurrence:0},{id:"🎵",element:"air",occurrence:0},{id:"🐦",element:"air",occurrence:0},{id:"🪞",element:"water",occurrence:0},{id:"🪷",element:"water",occurrence:0},{id:"💫",element:"aurora",occurrence:0},{id:"⭐",element:"light",occurrence:0},{id:"🏔️",element:"ice",occurrence:0}],S={nodes:E};function P(){const[c,l]=o.useState(!1),[s,n]=o.useState({occurrences:[],pairs:[],triples:[]}),[t,b]=o.useState([]),g=N(),m=x();o.useEffect(()=>{k(),n(w())},[]);const j=r=>{b(a=>a.includes(r)?a.filter(u=>u!==r):a.length>=3?a:[...a,r])},f=()=>{t.length===3&&(v(t),g("/guardian"))};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"relative rounded-2xl bg-white text-slate-900 shadow-lg p-6",children:[e.jsx(T,{active:t.length===3}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h2",{className:"text-xl font-medium flex items-center gap-2",children:[e.jsxs("span",{className:"relative inline-flex items-center",children:[e.jsx("span",{className:"text-2xl pr-2",children:"○"}),e.jsx(p,{size:24})]}),"Cosmojî – Réseau d'associations"]}),e.jsx("button",{onClick:()=>l(!0),className:"rounded-xl bg-slate-900 text-white px-3 py-1",children:"Panthéon"})]}),e.jsx("p",{className:"mt-2 text-sm text-slate-600",children:"Chaque nœud représente un émoji (taille = occurrences). Les liens indiquent les co‑occurrences (épaisseur = force)."}),e.jsx("div",{className:"mt-4",children:e.jsx(C,{stats:s,selectable:!0,selected:t,onToggle:j,maxNodes:30,maxLinks:200,glow:!0,getNodeColor:(r,a)=>{const i=S.nodes.find(y=>y.id===r);if(!i)return;const h={air:{base:"#22d3ee",dark:"#0891b2"},water:{base:"#60a5fa",dark:"#2563eb"},fire:{base:"#f59e0b",dark:"#d97706"},earth:{base:"#86efac",dark:"#16a34a"},ice:{base:"#93c5fd",dark:"#3b82f6"},aurora:{base:"#34d399",dark:"#10b981"},light:{base:"#f5d0fe",dark:"#e879f9"},animal:{base:"#fca5a5",dark:"#ef4444"}}[i.element]||{base:"#0ea5e9",dark:"#0284c7"};return{fill:a?h.base:"#0ea5e9",stroke:a?h.dark:"#0ea5e9",fillOpacity:a?.28:.12,strokeOpacity:a?.75:.45}}})}),e.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-slate-600 select-none",children:["Sélection: ",e.jsx("span",{className:"font-mono",children:t.join(" ")||"—"})]}),e.jsx(d.button,{onClick:f,disabled:t.length!==3,whileTap:{scale:.98},animate:t.length===3&&!m?{scale:[1,1.04,1]}:{scale:1},transition:t.length===3&&!m?{duration:2.4,repeat:1/0,ease:"easeInOut"}:{duration:.2},className:`rounded-xl px-3 py-1 text-sm font-medium transition ${t.length===3?"bg-emerald-600 text-white hover:bg-emerald-700":"bg-slate-200 text-slate-500 cursor-not-allowed"}`,children:"Entrer en résonance ✧"})]})]}),e.jsxs("div",{className:"relative rounded-2xl bg-white text-slate-900 shadow-lg p-6",children:[e.jsx("button",{className:"absolute top-4 left-4 rounded-xl bg-white/90 text-slate-900 backdrop-blur px-3 py-1 shadow border hover:bg-white",onClick:()=>history.back(),children:"← Retour"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h2",{className:"text-xl font-medium flex items-center gap-2",children:[e.jsxs("span",{className:"relative inline-flex items-center",children:[e.jsx("span",{className:"text-2xl pr-2",children:"○"}),e.jsx(p,{size:24})]}),"Cosmojî – Tendances"]}),e.jsx("button",{onClick:()=>l(!0),className:"rounded-xl bg-slate-900 text-white px-3 py-1",children:"Panthéon"})]}),e.jsxs("div",{className:"mt-4 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 text-sm",children:[e.jsxs("section",{children:[e.jsx("h3",{className:"text-slate-600 mb-2",children:"Top émojis"}),e.jsx("ul",{className:"space-y-1",children:s.occurrences.slice(0,8).map(({items:r,count:a},i)=>e.jsxs("li",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"select-none",children:r[0]}),e.jsx("span",{className:"text-slate-500",children:a})]},i))})]}),e.jsxs("section",{children:[e.jsx("h3",{className:"text-slate-600 mb-2",children:"Top paires"}),e.jsx("ul",{className:"space-y-1",children:s.pairs.slice(0,8).map(({items:r,count:a},i)=>e.jsxs("li",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"select-none",children:r.join(" ")}),e.jsx("span",{className:"text-slate-500",children:a})]},i))})]}),e.jsxs("section",{children:[e.jsx("h3",{className:"text-slate-600 mb-2",children:"Top triplets"}),e.jsx("ul",{className:"space-y-1",children:s.triples.slice(0,8).map(({items:r,count:a},i)=>e.jsxs("li",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"select-none",children:r.join(" ")}),e.jsx("span",{className:"text-slate-500",children:a})]},i))})]})]})]}),e.jsx(M,{open:c,onClose:()=>l(!1)})]})}export{P as default};
