import{G as C,H as P,I as L,J as k,r as d,A as F,j as y,m as N}from"./index-9MLGuvLY.js";import{A as $}from"./index-DfT8fcS9.js";function T(t){t.values.forEach(r=>r.stop())}function E(t,r){[...r].reverse().forEach(i=>{const a=t.getVariant(i);a&&P(t,a),t.variantChildren&&t.variantChildren.forEach(s=>{E(s,r)})})}function V(t,r){if(Array.isArray(r))return E(t,r);if(typeof r=="string")return E(t,[r]);P(t,r)}function _(){const t=new Set,r={subscribe(e){return t.add(e),()=>void t.delete(e)},start(e,i){const a=[];return t.forEach(s=>{a.push(C(s,e,{transitionOverride:i}))}),Promise.all(a)},set(e){return t.forEach(i=>{V(i,e)})},stop(){t.forEach(e=>{T(e)})},mount(){return()=>{r.stop()}}};return r}function q(){const t=L(_);return k(t.mount,[]),t}const D=400,J=36;function O(t,r,e){const[i,a]=d.useState(()=>new Array(t).fill(0).map(()=>({x:0,y:0}))),s=d.useRef(new Array(t).fill(0).map(()=>({vx:0,vy:0}))),b=d.useRef(new Array(t).fill(null).map(()=>q())),f=d.useRef(null);return d.useEffect(()=>{const n=r/2-e,o=i.map(()=>{const u=Math.random()*Math.PI*2,c=Math.sqrt(Math.random())*n;return{x:Math.cos(u)*c,y:Math.sin(u)*c}});a(o),s.current=s.current.map(()=>({vx:Math.random()*.6-.3,vy:Math.random()*.6-.3}))},[t,r]),d.useEffect(()=>{const n=r/2-e,o=.995,u=.95;let c=performance.now();const h=()=>{const m=performance.now(),x=Math.min(33,m-c)/16.67;c=m,a(v=>v.map((I,B)=>{const l=s.current[B];l.vx+=(Math.random()-.5)*.01,l.vy+=(Math.random()-.5)*.01;let p=I.x+l.vx*x,g=I.y+l.vy*x;const M=Math.hypot(p,g);if(M>n){const w=p/M,A=g/M;p=w*n,g=A*n;const R=l.vx*w+l.vy*A;l.vx=(l.vx-2*R*w)*u,l.vy=(l.vy-2*R*A)*u}return l.vx*=o,l.vy*=o,{x:p,y:g}})),f.current=requestAnimationFrame(h)};return f.current=requestAnimationFrame(h),()=>cancelAnimationFrame(f.current)},[r]),{positions:i,controls:b.current}}function H({emojis:t=F,selected:r,setSelected:e,maxSelected:i=5,size:a=D,emojiSize:s=J}){const b=d.useRef(null),{positions:f}=O(t.length,a,s),n=o=>{if(r.includes(o))e(r.filter(c=>c!==o));else{if(r.length>=i)return;e([...r,o])}};return y.jsx("div",{className:"relative mx-auto",style:{width:a,height:a},children:y.jsx("div",{ref:b,className:"w-full h-full rounded-full bg-white/70 backdrop-blur-sm shadow-inner shadow-blue-100 border border-white/60 overflow-hidden",children:t.map((o,u)=>{const c=r.includes(o),h=f[u]||{x:0,y:0},m=a/2,x={x:m+h.x-s/2,y:m+h.y-s/2};return y.jsx(N.button,{className:"absolute flex items-center justify-center select-none",style:{width:s,height:s},animate:{left:x.x,top:x.y,scale:c?1.35:1,filter:c?"drop-shadow(0 0 8px rgba(59,130,246,0.7))":"none"},transition:{type:"spring",stiffness:120,damping:16},onClick:()=>n(o),children:y.jsx("span",{className:`transition-colors ${c?"text-blue-600":"text-slate-700"}`,style:{fontSize:Math.round(s*.8)},children:o})},u)})})})}function S({active:t=!1,count:r=25,continuous:e=!1}){const[i,a]=d.useState([]),s=d.useRef(0);d.useEffect(()=>{if(!t){a([]);return}const n=b(r);if(a(n),!e)return;const o=setInterval(()=>{a(u=>{const c=Date.now(),h=u.filter(v=>c-v.createdAt<8e3),m=3+Math.floor(Math.random()*3),x=b(m);return[...h,...x]})},800);return()=>clearInterval(o)},[t,r,e]);function b(n){return Array.from({length:n},()=>({id:`bubble-${s.current++}`,createdAt:Date.now(),x:50+(Math.random()-.5)*40,y:50+(Math.random()-.5)*40,size:6+Math.random()*28,delay:Math.random()*.5,duration:4+Math.random()*3,dx:(Math.random()-.5)*80,dy:-60-Math.random()*120,rotation:Math.random()*360,color:Math.random()>.7?"purple":Math.random()>.5?"cyan":"blue"}))}if(!t)return null;const f=n=>{switch(n){case"purple":return"radial-gradient(circle at 30% 30%, rgba(196, 181, 253, 0.9), rgba(147, 51, 234, 0.5))";case"cyan":return"radial-gradient(circle at 30% 30%, rgba(165, 243, 252, 0.9), rgba(34, 211, 238, 0.5))";default:return"radial-gradient(circle at 30% 30%, rgba(191, 219, 254, 0.9), rgba(96, 165, 250, 0.5))"}};return y.jsx("div",{className:"absolute inset-0 pointer-events-none overflow-hidden rounded-full",style:{zIndex:10},children:y.jsx($,{children:i.map(n=>y.jsx(N.div,{className:"absolute rounded-full",style:{left:`${n.x}%`,top:`${n.y}%`,width:n.size,height:n.size,background:f(n.color),boxShadow:`0 0 ${n.size*.5}px rgba(147, 197, 253, 0.7), inset -2px -2px 6px rgba(255, 255, 255, 0.6)`,border:"1px solid rgba(255, 255, 255, 0.3)"},initial:{opacity:0,scale:0,x:0,y:0,rotate:0},animate:{opacity:[0,.9,.7,0],scale:[0,1,1.3,.9],x:[0,n.dx*.3,n.dx],y:[0,n.dy*.5,n.dy],rotate:[n.rotation,n.rotation+180]},exit:{opacity:0,scale:0},transition:{duration:n.duration,delay:n.delay,ease:"easeOut"}},n.id))})})}export{S as B,H as E};
