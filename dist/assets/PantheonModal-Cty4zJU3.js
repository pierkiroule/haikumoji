import{r as c,d as w,l as g,j as e,m as b}from"./index-CGm7zO8O.js";import{A as N}from"./index-DqRjzgrL.js";function R({open:n,onClose:i}){const[y,u]=c.useState([]),f=c.useRef(null),m=c.useRef(null),x=c.useRef(null);return c.useEffect(()=>{if(n){w();try{const s=[...g()].sort((o,r)=>(r.likes||0)-(o.likes||0)).slice(0,5);u(s)}catch{u([])}}},[n]),c.useEffect(()=>{if(!n){const t=x.current;t&&typeof t.focus=="function"&&setTimeout(()=>t.focus(),0),document.body.style.overflow="";return}x.current=document.activeElement,document.body.style.overflow="hidden";const s=["a[href]","area[href]","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])",'[tabindex]:not([tabindex="-1"])'].join(","),o=()=>{const t=f.current;if(!t)return;const l=Array.from(t.querySelectorAll(s)),a=m.current||l[0];a&&typeof a.focus=="function"&&a.focus()},r=t=>{if(n){if(t.key==="Escape"){t.preventDefault(),i==null||i();return}if(t.key==="Tab"){const l=f.current;if(!l)return;const a=Array.from(l.querySelectorAll(s)).filter(j=>j.offsetParent!==null);if(a.length===0)return;const p=a[0],h=a[a.length-1],d=document.activeElement;t.shiftKey?(d===p||!l.contains(d))&&(t.preventDefault(),h.focus()):(d===h||!l.contains(d))&&(t.preventDefault(),p.focus())}}},v=setTimeout(o,0);return window.addEventListener("keydown",r),()=>{clearTimeout(v),window.removeEventListener("keydown",r)}},[n,i]),e.jsx(N,{children:n&&e.jsxs(b.div,{className:"fixed inset-0 z-50 flex items-center justify-center",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[e.jsx("div",{className:"absolute inset-0 bg-slate-900/40 backdrop-blur-sm",onClick:i}),e.jsxs(b.div,{role:"dialog","aria-modal":"true","aria-labelledby":"pantheon-title",className:"relative z-10 w-[92vw] max-w-xl rounded-2xl bg-white text-slate-900 shadow-2xl p-6 md:p-8",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.97,opacity:0},transition:{type:"spring",stiffness:140,damping:16},ref:f,tabIndex:-1,children:[e.jsx("button",{onClick:i,className:"absolute right-4 top-4 h-9 w-9 rounded-full bg-slate-100 hover:bg-slate-200 active:bg-slate-300 transition flex items-center justify-center","aria-label":"Close",ref:m,children:"√ó"}),e.jsxs("div",{className:"mb-4 flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:"üèõÔ∏è"}),e.jsx("h2",{id:"pantheon-title",className:"text-xl font-semibold",children:"Panth√©on ‚Äì Top 5 de la semaine"})]}),e.jsx("ul",{className:"space-y-4",children:y.map(s=>e.jsxs("li",{className:"rounded-xl border border-slate-200 p-4 hover:shadow-md transition",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsx("div",{className:"flex items-center gap-2 text-xl",children:s.emojis.map((o,r)=>e.jsx("span",{children:o},r))}),e.jsxs("div",{className:"text-sm text-slate-600",children:["‚ù§Ô∏è ",s.likes]})]}),e.jsx("pre",{className:"mt-2 whitespace-pre-wrap font-sans text-slate-800 leading-relaxed",children:s.text}),e.jsxs("div",{className:"mt-2 text-sm text-slate-500",children:["‚Äî ",s.author]})]},s.id))})]})]})})}export{R as P};
