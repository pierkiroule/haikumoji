import{r as l,c as j,d as y,q as N,t as f,g as b,j as e,m as s,F as q,y as S}from"./index-Bw6HACOd.js";const $=["Sous la lune pÃ¢le","Dans le grand silence","Au bord de la glace","Entre deux marÃ©es","Sous les aurores","PrÃ¨s du souffle froid"],T=["un chant sâ€™Ã©lÃ¨ve doucement","la mÃ©moire se dÃ©plie","un regard cherche le nord","la patience apprend Ã  voir","une Ã©tincelle rÃ©chauffe","la nuit Ã©coute nos pas"],I=["le rÃªve tient dans la main","les baleines racontent","la banquise se souvient","les Ã©toiles se rapprochent","le corbeau nous apprend","le cercle se referme"],h={openings:$,middles:T,closings:I},M={1:{titre:"La Lune du Souffle",ressource:"Le mythe du Narval et le souffle marin."},2:{titre:"La Lune du Silence",ressource:"Le rÃªve du corbeau et la patience du froid."},3:{titre:"La Lune des Aurores",ressource:"Les rubans verts et pourpres qui dansent au nord."},4:{titre:"La Lune des Glaces",ressource:"La marche sur la banquise et la sagesse des traces."},5:{titre:"La Lune des MarÃ©es",ressource:"Les esprits des eaux et la respiration des rivages."},6:{titre:"La Lune des Animaux",ressource:"La baleine qui chante, le phoque qui Ã©coute, le renard qui guette."},7:{titre:"La Lune des Feux",ressource:"Le foyer, la braise qui parle et la mÃ©moire des anciens."},8:{titre:"La Lune des Oiseaux",ressource:"Les migrations, les plumes, et la carte secrÃ¨te du ciel."},9:{titre:"La Lune des Reflets",ressource:"Le miroir de la glace, les eaux sombres, les doubles rÃªves."},10:{titre:"La Lune des Chemins",ressource:"Le traÃ®neau, la trace, et le fil invisible de lâ€™entraide."},11:{titre:"La Lune de lâ€™Ã‰coute",ressource:"La parole des pierres, les murmures du vent, le pacte du silence."},12:{titre:"La Lune du Retour",ressource:"Le cercle se refermeÂ : partager, transmettre, prÃ©server lâ€™onidiversitÃ©."}};function g(r,o){const a=c=>c[Math.floor(Math.random()*c.length)],[m,d,i]=(r||[]).slice(0,3),t=`${a(o.openings)} â€” ${m||""}`.trim(),p=`${a(o.middles)} â€” ${d||""}`.trim(),x=`${a(o.closings)} â€” ${i||""}`.trim();return`${t}
${p}
${x}`}function R(){const[r,o]=l.useState(1),[a,m]=l.useState([]),[d,i]=l.useState(""),[t,p]=l.useState(null),x=j();l.useEffect(()=>{y();const n=N();o(n);const u=f();m(u);const v=b();p(v),i(v?g(u,h):"")},[]);const c=l.useMemo(()=>M[String(r)]||{titre:`Lune ${r}`,ressource:""},[r]),L=()=>{const n=b();if(!n){alert("Inscription locale requise pour sauvegarder un rÃªve.");return}q({moon:r,emojis:a,text:d,author:n.name,authorId:n.id}),alert("RÃªve sauvegardÃ© dans la mÃ©moire locale.")},w=()=>{const n=S();o(n);const u=f();i(t?g(u,h):"")};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(s.section,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"rounded-2xl glass-strong border border-white/20 p-6 shadow-card relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 text-8xl opacity-10",children:"ðŸŒ™"}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("div",{className:"inline-block px-3 py-1.5 rounded-full bg-gradient-to-r from-aurora-purple/20 to-aurora-blue/20 border border-white/10 mb-3",children:e.jsxs("span",{className:"text-xs font-medium text-white",children:["Lune ",r,"/12"]})}),e.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-white mb-2",children:c.titre}),e.jsx("p",{className:"text-slate-300 text-sm leading-relaxed mb-4",children:c.ressource}),e.jsx(s.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>x("/guardian"),className:"inline-flex items-center gap-2 rounded-xl bg-gradient-to-r from-midnight-400 to-midnight-500 text-white px-5 py-2.5 hover:shadow-aurora transition-all duration-300 font-medium",children:"Rencontrer le gardien âœ§"})]})]}),e.jsxs(s.section,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"rounded-2xl bg-white text-slate-900 shadow-card-hover p-6 space-y-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-4xl select-none mb-3",children:a.join(" ")||"â€”"}),!t&&e.jsxs(s.div,{initial:{opacity:0},animate:{opacity:1},className:"rounded-xl bg-gradient-to-r from-indigo-50 to-purple-50 border border-indigo-200 text-indigo-800 p-4 text-sm",children:[e.jsx("p",{className:"font-medium mb-2",children:"âœ¨ Inscription requise"}),e.jsx("p",{className:"text-xs text-indigo-700",children:"Inscrivez-vous localement pour gÃ©nÃ©rer et sauvegarder vos rÃªves."})]})]}),d&&e.jsx(s.div,{initial:{opacity:0},animate:{opacity:1},className:"rounded-xl bg-gradient-to-br from-slate-50 to-white border border-slate-200 p-6",children:e.jsx("pre",{className:"whitespace-pre-wrap leading-relaxed text-slate-800 text-center font-medium",children:d})}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3 pt-2",children:[e.jsx(s.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>{if(!t){alert("Inscription locale requise.");return}i(g(a,h))},disabled:!t,className:`flex-1 min-w-[120px] rounded-xl px-4 py-3 font-medium transition-all duration-300 ${t?"bg-gradient-to-r from-slate-900 to-slate-800 text-white hover:from-slate-800 hover:to-slate-700 shadow-md hover:shadow-lg":"bg-slate-200 text-slate-400 cursor-not-allowed"}`,children:"ðŸ”„ RegÃ©nÃ©rer"}),e.jsx(s.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:L,disabled:!t,className:`flex-1 min-w-[120px] rounded-xl px-4 py-3 font-medium transition-all duration-300 ${t?"bg-gradient-to-r from-emerald-600 to-emerald-500 text-white hover:from-emerald-700 hover:to-emerald-600 shadow-md hover:shadow-lg":"bg-slate-200 text-slate-400 cursor-not-allowed"}`,children:"ðŸ’¾ Sauvegarder"}),e.jsx(s.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:w,className:"flex-1 min-w-[140px] rounded-xl bg-gradient-to-r from-midnight-400 to-midnight-500 text-white px-4 py-3 hover:shadow-aurora transition-all duration-300 font-medium",children:"Lune suivante â†’"})]})]})]})}export{R as default};
