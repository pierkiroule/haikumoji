import{r as x,c as V,d as z,t as D,v as j,w as I,x as M,j as e,m as t,p as L,y as G,z as P}from"./index-BBdapSLE.js";import{g as O}from"./voyageLoader-BQqfg_ia.js";import{A as w}from"./index-CqGXxBgE.js";function J(){var f,N,v,y;const[c,C]=x.useState([]),[n,q]=x.useState(null),[o,h]=x.useState(1),[p,k]=x.useState(""),[S,T]=x.useState(!0),_=V();x.useEffect(()=>{z();const s=D(),a=j(),m=I(),H=O(s,a);C(m),q(H),M(m);const A=setTimeout(()=>T(!1),2e3);return()=>clearTimeout(A)},[]);const u=()=>{o<4&&h(o+1)},E=()=>{if(!n)return;const s=j();G({moon:s,guardianId:n.gardien.id,emojis:c,element:n.gardien.element});try{P()}catch{}_("/dreamgarden")};if(!n)return e.jsx(t.div,{initial:{opacity:0},animate:{opacity:1},className:"min-h-[60vh] flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-6xl mb-4",children:"🌙"}),e.jsx("p",{className:"text-slate-300",children:"Chargement de la rencontre..."})]})});const l=n.gardien,b=n.sagesses,r=n.rituel_de_nuit,i=n.script_onirique,R=n.astuces_chamaniques||[],d=n.invitation_ecriture,g=(v=(N=(f=i==null?void 0:i.variation_avec_emojis)==null?void 0:f.replace("{emoji1}",c[0]||""))==null?void 0:N.replace("{emoji2}",c[1]||""))==null?void 0:v.replace("{emoji3}",c[2]||"");return e.jsxs("div",{className:"relative space-y-6 pb-20",children:[e.jsx(w,{children:S&&e.jsx(t.div,{initial:{opacity:0},animate:{opacity:.8},exit:{opacity:0},className:"pointer-events-none fixed inset-0 z-0",style:{background:"radial-gradient(120% 80% at 50% 0%, rgba(16,185,129,0.25), rgba(59,130,246,0.16) 40%, transparent 70%)",filter:"blur(12px) saturate(150%)",mixBlendMode:"screen"}})}),e.jsxs(t.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"glass-strong rounded-2xl border border-white/20 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"text-sm font-medium text-white",children:["Rencontre chamanique - Étape ",o,"/4"]}),e.jsx("div",{className:"text-2xl",children:l.emoji})]}),e.jsx("div",{className:"flex gap-2",children:[1,2,3,4].map(s=>e.jsx("div",{className:`h-2 flex-1 rounded-full transition-all duration-500 ${s<=o?"bg-gradient-to-r from-emerald-500 to-cyan-500":"bg-white/20"}`},s))})]}),e.jsxs(w,{mode:"wait",children:[o===1&&e.jsx(t.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-6",children:e.jsxs(t.section,{className:"rounded-2xl bg-white text-slate-900 shadow-2xl p-8 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 text-9xl opacity-5",children:l.emoji}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"inline-block px-3 py-1 rounded-full bg-gradient-to-r from-cyan-100 to-blue-100 text-cyan-700 text-sm font-medium mb-3",children:["Lune ",j(),"/12"]}),e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-slate-900 mb-2",children:l.titre}),e.jsxs("p",{className:"text-slate-600 text-lg",children:[l.nom," • Élément : ",l.element]})]}),e.jsx("div",{className:"text-6xl",children:l.emoji})]}),e.jsx("div",{className:"rounded-xl bg-gradient-to-br from-slate-50 to-white border border-slate-200 p-6 mb-6",children:e.jsx("p",{className:"text-slate-700 leading-relaxed italic",children:l.description})}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-sm font-medium text-slate-600 mb-2",children:"Vos symboles cosmiques"}),e.jsx("div",{className:"flex gap-3",children:c.map((s,a)=>{const m=L(s);return e.jsxs(t.div,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{delay:a*.1,type:"spring"},className:"flex-1 rounded-xl bg-gradient-to-br from-emerald-50 to-cyan-50 border border-emerald-200 p-4 text-center",children:[e.jsx("div",{className:"text-4xl mb-2",children:s}),m&&e.jsx("div",{className:"text-xs text-slate-600",children:m.name})]},a)})})]}),e.jsx("div",{className:"rounded-xl bg-gradient-to-r from-cyan-500/10 to-blue-500/10 border border-cyan-200 p-6 mb-6",children:e.jsxs("p",{className:"text-lg leading-relaxed text-slate-800",children:['"',b.message_accueil,'"']})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-xl font-semibold text-slate-900",children:"Enseignement chamanique"}),e.jsx("p",{className:"text-slate-700 leading-relaxed text-lg",children:b.enseignement_principal}),e.jsx("div",{className:"rounded-xl bg-emerald-50 border border-emerald-200 p-4",children:e.jsxs("p",{className:"text-emerald-800 font-medium text-center",children:["💫 ",b.sagesse_courte]})})]}),e.jsx(t.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:u,className:"mt-8 w-full rounded-xl bg-gradient-to-r from-emerald-500 to-cyan-500 text-white px-6 py-4 font-semibold text-lg shadow-lg hover:shadow-xl transition-all duration-300",children:"Continuer vers l'introspection →"})]})]})},"step1"),o===2&&e.jsx(t.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-6",children:e.jsxs(t.section,{className:"rounded-2xl bg-white text-slate-900 shadow-2xl p-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("div",{className:"text-4xl mb-4 text-center",children:l.emoji}),e.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-2 text-center",children:"Exprime tes sensations"}),e.jsx("p",{className:"text-slate-600 text-center",children:(d==null?void 0:d.question)||"Quelles sensations positives t'inspirent ces 3 symboles ?"})]}),e.jsx("div",{className:"flex justify-center gap-4 mb-6",children:c.map((s,a)=>e.jsx("div",{className:"text-5xl",children:s},a))}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Écris librement tes ressentis"}),e.jsx("textarea",{value:p,onChange:s=>k(s.target.value),placeholder:(d==null?void 0:d.placeholder)||"Ex : Le vent qui caresse, la plume qui danse, la lumière qui apaise...",className:"w-full min-h-[160px] rounded-xl border-2 border-slate-200 focus:border-cyan-500 focus:ring-2 focus:ring-cyan-200 p-4 text-slate-900 leading-relaxed transition-all resize-none"})]}),(d==null?void 0:d.guidance)&&e.jsx("div",{className:"rounded-xl bg-blue-50 border border-blue-200 p-4",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("span",{className:"font-medium",children:"💡 Inspiration :"})," ",d.guidance]})})]}),e.jsxs("div",{className:"flex gap-3 mt-8",children:[e.jsx(t.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>h(1),className:"flex-1 rounded-xl bg-slate-200 text-slate-700 px-6 py-4 font-semibold hover:bg-slate-300 transition-all duration-300",children:"← Retour"}),e.jsx(t.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:u,disabled:!p.trim(),className:`flex-1 rounded-xl px-6 py-4 font-semibold transition-all duration-300 ${p.trim()?"bg-gradient-to-r from-emerald-500 to-cyan-500 text-white shadow-lg hover:shadow-xl":"bg-slate-200 text-slate-400 cursor-not-allowed"}`,children:"Recevoir le script onirique →"})]})]})},"step2"),o===3&&e.jsx(t.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-6",children:e.jsxs(t.section,{className:"rounded-2xl bg-gradient-to-br from-slate-900 to-midnight-900 text-white shadow-2xl p-8 relative overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 opacity-10",children:[e.jsx("div",{className:"absolute top-10 right-10 text-9xl",children:l.emoji}),e.jsx("div",{className:"absolute bottom-10 left-10 text-7xl",children:"✨"})]}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"inline-block px-4 py-2 rounded-full bg-white/10 border border-white/20 mb-4",children:e.jsx("span",{className:"text-sm font-medium",children:"📜 Cadeau du Gardien"})}),e.jsx("h2",{className:"text-3xl font-bold mb-2",children:(i==null?void 0:i.titre)||"Script Onirique"}),e.jsxs("p",{className:"text-slate-300",children:["Offert par ",l.nom]})]}),e.jsx("div",{className:"rounded-2xl bg-white/5 border border-white/20 backdrop-blur-sm p-8 mb-6",children:e.jsx("pre",{className:"whitespace-pre-wrap leading-loose text-lg font-light text-center text-white",children:i==null?void 0:i.texte})}),g&&e.jsxs("div",{className:"rounded-xl bg-gradient-to-r from-emerald-500/20 to-cyan-500/20 border border-emerald-400/30 p-6 mb-6",children:[e.jsx("div",{className:"text-sm font-medium text-emerald-200 mb-2 text-center",children:"✨ Version personnalisée avec vos émojis"}),e.jsx("p",{className:"text-white leading-relaxed text-center",children:g})]}),(i==null?void 0:i.instructions)&&e.jsx("div",{className:"rounded-xl bg-white/10 border border-white/20 p-4 mb-6",children:e.jsxs("p",{className:"text-sm text-slate-200 leading-relaxed",children:[e.jsx("span",{className:"font-semibold text-white",children:"Mode d'emploi :"})," ",i.instructions]})}),e.jsxs("div",{className:"rounded-xl bg-white/5 border border-white/20 p-6",children:[e.jsxs("h3",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[e.jsx("span",{children:"🌙"}),(r==null?void 0:r.titre)||"Rituel de nuit"]}),e.jsx("div",{className:"space-y-3",children:(y=r==null?void 0:r.etapes)==null?void 0:y.map((s,a)=>e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0 w-6 h-6 rounded-full bg-cyan-500/20 border border-cyan-400/40 flex items-center justify-center text-xs font-bold text-cyan-300",children:a+1}),e.jsx("p",{className:"text-slate-200 leading-relaxed text-sm",children:s})]},a))}),(r==null?void 0:r.duree)&&e.jsxs("div",{className:"mt-4 text-sm text-slate-400",children:["⏱️ Durée : ",r.duree," • ",r.moment_ideal]})]}),e.jsxs("div",{className:"flex gap-3 mt-8",children:[e.jsx(t.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>h(2),className:"flex-1 rounded-xl bg-white/10 border border-white/20 text-white px-6 py-4 font-semibold hover:bg-white/20 transition-all duration-300",children:"← Retour"}),e.jsx(t.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:u,className:"flex-1 rounded-xl bg-gradient-to-r from-emerald-500 to-cyan-500 text-white px-6 py-4 font-semibold shadow-lg hover:shadow-xl transition-all duration-300",children:"Découvrir les astuces chamaniques →"})]})]})]})},"step3"),o===4&&e.jsx(t.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-6",children:e.jsxs(t.section,{className:"rounded-2xl bg-white text-slate-900 shadow-2xl p-8",children:[e.jsxs("h2",{className:"text-2xl font-bold text-slate-900 mb-6 flex items-center gap-3",children:[e.jsx("span",{className:"text-3xl",children:l.emoji}),"Astuces chamaniques de ",l.nom]}),e.jsx("div",{className:"grid md:grid-cols-3 gap-4 mb-8",children:R.map((s,a)=>e.jsxs(t.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:a*.1},className:"rounded-xl bg-gradient-to-br from-slate-50 to-white border border-slate-200 p-6 hover:shadow-lg transition-all duration-300",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-cyan-500 to-blue-500 flex items-center justify-center text-white font-bold mb-3",children:a+1}),e.jsx("h3",{className:"font-semibold text-slate-900 mb-2",children:s.titre}),e.jsx("p",{className:"text-sm text-slate-600 leading-relaxed",children:s.description})]},a))}),e.jsxs("div",{className:"rounded-xl bg-gradient-to-r from-purple-50 to-pink-50 border-2 border-purple-200 p-6 mb-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-purple-900 mb-3 flex items-center gap-2",children:[e.jsx("span",{children:"✨"}),"Votre impact sur le Cosmoji collectif"]}),e.jsx("p",{className:"text-purple-800 mb-4",children:"Vos 3 émojis vont enrichir le réseau cosmique partagé par toute la communauté. Chaque choix renforce les connexions et inspire les futurs voyageurs."}),e.jsx("div",{className:"flex justify-center gap-3 mb-3",children:c.map((s,a)=>e.jsx(t.div,{animate:{scale:[1,1.2,1],rotate:[0,10,-10,0]},transition:{duration:2,repeat:1/0,delay:a*.3},className:"text-4xl",children:s},a))}),e.jsx("p",{className:"text-sm text-purple-700 text-center",children:"Ces symboles rejoignent le grand réseau onirique ✨"})]}),e.jsxs("div",{className:"rounded-2xl bg-gradient-to-br from-emerald-500 to-cyan-500 text-white p-8 text-center",children:[e.jsx("div",{className:"text-6xl mb-4",children:"⭐"}),e.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Graine d'Étoile Prête"}),e.jsxs("p",{className:"text-emerald-100 mb-6",children:["Votre rencontre avec ",l.nom," a produit une graine d'étoile unique. Elle rejoindra votre Jardin du Rêve et marquera votre progression dans ce voyage."]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(t.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>h(3),className:"flex-1 rounded-xl bg-white/20 border border-white/30 text-white px-6 py-4 font-semibold hover:bg-white/30 transition-all duration-300",children:"← Revoir le script"}),e.jsx(t.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:E,className:"flex-1 rounded-xl bg-white text-emerald-600 px-6 py-4 font-bold text-lg shadow-xl hover:shadow-2xl transition-all duration-300",children:"⭐ Collecter et terminer"})]})]})]})},"step4")]})]})}export{J as default};
