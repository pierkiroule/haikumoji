import{r as d,c as N,d as $,v as S,w as b,g as w,t as T,j as e,m as n,K as I,z as k}from"./index-BBdapSLE.js";import{g as L}from"./voyageLoader-BQqfg_ia.js";const M=["Sous la lune pÃ¢le","Dans le grand silence","Au bord de la glace","Entre deux marÃ©es","Sous les aurores","PrÃ¨s du souffle froid"],C=["un chant sâ€™Ã©lÃ¨ve doucement","la mÃ©moire se dÃ©plie","un regard cherche le nord","la patience apprend Ã  voir","une Ã©tincelle rÃ©chauffe","la nuit Ã©coute nos pas"],E=["le rÃªve tient dans la main","les baleines racontent","la banquise se souvient","les Ã©toiles se rapprochent","le corbeau nous apprend","le cercle se referme"],g={openings:M,middles:C,closings:E};function v(r,l){const o=m=>m[Math.floor(Math.random()*m.length)],[x,c,i]=(r||[]).slice(0,3),s=`${o(l.openings)} â€” ${x||""}`.trim(),p=`${o(l.middles)} â€” ${c||""}`.trim(),h=`${o(l.closings)} â€” ${i||""}`.trim();return`${s}
${p}
${h}`}function H(){const[r,l]=d.useState(1),[o,x]=d.useState([]),[c,i]=d.useState(""),[s,p]=d.useState(null),h=N();d.useEffect(()=>{$();const a=S();l(a);const t=b();x(t);const u=w();p(u),i(u?v(t,g):"")},[]);const m=d.useMemo(()=>{var u,f;const a=T(),t=L(a,r);return t?{titre:((u=t==null?void 0:t.gardien)==null?void 0:u.titre)||`Lune ${r}`,ressource:((f=t==null?void 0:t.ressources_culturelles)==null?void 0:f.explication)||""}:{titre:`Lune ${r}`,ressource:""}},[r]),j=()=>{const a=w();if(!a){alert("Inscription locale requise pour sauvegarder un rÃªve.");return}I({moon:r,emojis:o,text:c,author:a.name,authorId:a.id}),alert("RÃªve sauvegardÃ© dans la mÃ©moire locale.")},y=()=>{const a=k();l(a);const t=b();i(s?v(t,g):"")};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(n.section,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"rounded-2xl glass-strong border border-white/20 p-6 shadow-card relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 text-8xl opacity-10",children:"ðŸŒ™"}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("div",{className:"inline-block px-3 py-1.5 rounded-full bg-gradient-to-r from-aurora-purple/20 to-aurora-blue/20 border border-white/10 mb-3",children:e.jsxs("span",{className:"text-xs font-medium text-white",children:["Lune ",r,"/12"]})}),e.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-white mb-2",children:m.titre}),e.jsx("p",{className:"text-slate-300 text-sm leading-relaxed mb-4",children:m.ressource}),e.jsx(n.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>h("/guardian"),className:"inline-flex items-center gap-2 rounded-xl bg-gradient-to-r from-midnight-400 to-midnight-500 text-white px-5 py-2.5 hover:shadow-aurora transition-all duration-300 font-medium",children:"Rencontrer le gardien âœ§"})]})]}),e.jsxs(n.section,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"rounded-2xl bg-white text-slate-900 shadow-card-hover p-6 space-y-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-4xl select-none mb-3",children:o.join(" ")||"â€”"}),!s&&e.jsxs(n.div,{initial:{opacity:0},animate:{opacity:1},className:"rounded-xl bg-gradient-to-r from-indigo-50 to-purple-50 border border-indigo-200 text-indigo-800 p-4 text-sm",children:[e.jsx("p",{className:"font-medium mb-2",children:"âœ¨ Inscription requise"}),e.jsx("p",{className:"text-xs text-indigo-700",children:"Inscrivez-vous localement pour gÃ©nÃ©rer et sauvegarder vos rÃªves."})]})]}),c&&e.jsx(n.div,{initial:{opacity:0},animate:{opacity:1},className:"rounded-xl bg-gradient-to-br from-slate-50 to-white border border-slate-200 p-6",children:e.jsx("pre",{className:"whitespace-pre-wrap leading-relaxed text-slate-800 text-center font-medium",children:c})}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3 pt-2",children:[e.jsx(n.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>{if(!s){alert("Inscription locale requise.");return}i(v(o,g))},disabled:!s,className:`flex-1 min-w-[120px] rounded-xl px-4 py-3 font-medium transition-all duration-300 ${s?"bg-gradient-to-r from-slate-900 to-slate-800 text-white hover:from-slate-800 hover:to-slate-700 shadow-md hover:shadow-lg":"bg-slate-200 text-slate-400 cursor-not-allowed"}`,children:"ðŸ”„ RegÃ©nÃ©rer"}),e.jsx(n.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:j,disabled:!s,className:`flex-1 min-w-[120px] rounded-xl px-4 py-3 font-medium transition-all duration-300 ${s?"bg-gradient-to-r from-emerald-600 to-emerald-500 text-white hover:from-emerald-700 hover:to-emerald-600 shadow-md hover:shadow-lg":"bg-slate-200 text-slate-400 cursor-not-allowed"}`,children:"ðŸ’¾ Sauvegarder"}),e.jsx(n.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:y,className:"flex-1 min-w-[140px] rounded-xl bg-gradient-to-r from-midnight-400 to-midnight-500 text-white px-4 py-3 hover:shadow-aurora transition-all duration-300 font-medium",children:"Lune suivante â†’"})]})]})]})}export{H as default};
