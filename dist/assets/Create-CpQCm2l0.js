import{M as q,r,u as R,s as B,a as F,b as U,j as e,m as o,A as V,g as D,c as _,d as J}from"./index-9MLGuvLY.js";import{B as W,E as G}from"./BubbleParticles-BDPPLkw9.js";import{P as X}from"./PantheonModal-C_85DvbM.js";import"./index-DfT8fcS9.js";const K={"🌬️":["vent","souffle","brise"],"❄️":["glace","givre","hiver"],"🐋":["baleine","chant","cétacé"],"🌊":["vague","marée","océan"],"🔥":["feu","braise","ardeur"],"🌙":["lune","bleue","nuit"],"🛶":["canoë","kayak","berge"],"🌌":["voie lactée","galaxie","cosmos"],"🧊":["banquise","glacon","froid"],"🌈":["arc","pluie","couleurs"],"🐚":["coquillage","écoute","rivage"],"🪶":["plume","léger","oiseau"],"🌞":["soleil","midi","chaleur"],"💧":["goutte","rosée","source"],"🌿":["herbe","forêt","mousse"],"🍂":["feuille","automne","bruit sec"],"🌑":["ombre","nouvelle lune","silence"],"☁️":["nuage","voile","brume"],"🦭":["phoque","île","arctique"],"🌕":["pleine lune","argent","ronde"],"🌠":["étoile filante","souhait","tracé"],"🌧️":["averse","rumeur","ruissellement"],"🎵":["chant","mélodie","tempo"],"🪞":["miroir","reflet","lueur"],"🪷":["lotus","étang","sérénité"],"💫":["étincelle","vertige","poussière d’étoile"]},Q=["sous","dans","sur","vers","près de","avec"],Y=["chante","tombe","respire","murmure","gronde","luit","s'éveille","s'endort"],Z=["doucement","lentement","encore","déjà","toujours"],ee=["—","…",":"];function f(t){return t[Math.floor(Math.random()*t.length)]}function te(t){const s=(t||"").trim().toLowerCase();return/^[aeiouyàâäéèêëîïôöùûüœh]/.test(s)}function se(t){const s=(t||"").trim().toLowerCase();return/e$/.test(s)||/ée$/.test(s)||/ette$/.test(s)}function j(t){const s=(t||"").trim();if(s.length===0||/^(le|la|les|un|une|des|du|de la|de l’|de l'|l’|l')\s/i.test(s))return s;if(te(s))return`l’${s}`;const i=se(s);return`${f(i?["la","une","cette"]:["le","un","ce"])} ${s}`}function g(t){return t&&t.charAt(0).toUpperCase()+t.slice(1)}function d(t,s){const i=t;switch(s){case 0:return g(j(i));case 1:return`${g(f(Q))} ${j(i)}`;case 2:return`${g(f(Y))} ${j(i)}`;case 3:return`${g(j(i))} ${f(Z)}`;default:return g(i)}}function I(t){const s=K[t];return Array.isArray(s)&&s.length>0?s:["silence","nuit","vent"]}function P(t=[],s=q){const i=Array.isArray(t)?t.slice(0,3):[];if(i.length<3)return[];const[S,M,$]=i,A=I(S),C=I(M),b=I($),w=new Set;for(;w.size<Math.min(s,8);){const u=f(A),v=f(C),m=f(b),x=Math.floor(Math.random()*5);let n,h,p;if(x===0)n=d(u,0),h=d(v,1),p=d(m,2);else if(x===1)n=d(u,0),h=d(v,3),p=d(m,0);else if(x===2){const l=f(ee);n=`${d(u,0)} ${l}`,h=d(v,2),p=d(m,0)}else x===3?(n=d(u,0),h=`Entre ${j(u)} et ${j(m)}`,p=d(m,0)):(n=g(u),h=g(v),p=g(m));const E=`${n}
${h}
${p}`;w.add(E)}return Array.from(w)}const ae=V;function le(){const[t,s]=r.useState([]),[i,S]=r.useState(!1),[M,$]=r.useState(360),[A,C]=r.useState(36),[b,w]=r.useState(["","",""]),[u,v]=r.useState(""),[m,x]=r.useState([]),[n,h]=r.useState("select"),p=R(),E=r.useRef(null);r.useEffect(()=>{B();const a=F();a&&(s(Array.isArray(a.emojis)?a.emojis:[]),w(Array.isArray(a.lines)&&a.lines.length===3?a.lines:["","",""]));const c=()=>{const N=Math.max(320,Math.min(window.innerWidth,640)),y=Math.max(540,window.innerHeight),O=Math.round(N*.82),H=Math.round(Math.max(260,Math.min(y*.48,460))),z=Math.min(O,H),T=Math.max(28,Math.round(z*.085));$(z),C(T)};return c(),window.addEventListener("resize",c),()=>window.removeEventListener("resize",c)},[]),r.useEffect(()=>{U({emojis:t,lines:b})},[t,b]),r.useEffect(()=>{if(n==="compose"){if(t.length<3){x([]);return}x(P(t.slice(0,3)))}},[n,t]);const l=t.length>=3&&t.length<=5,k=l?"Créer ma Suggestion Onirique":"Choisir 3–5 émojis";r.useEffect(()=>{!l&&n!=="select"&&h("select")},[l,n]),r.useEffect(()=>{n==="compose"&&setTimeout(()=>{const a=E.current||document.getElementById("compose-area");a==null||a.scrollIntoView({behavior:"smooth",block:"center"})},0)},[n]);const L=()=>{if(!l)return;const a=b.map(y=>y.trim());if(a.some(y=>y.length===0)){v("Complète les trois lignes avant de publier.");return}const c=D()||{name:"Anonyme",id:null},N=a.join(`
`);_({emojis:t.slice(0,5),text:N,author:c.name,authorId:c.id}),J(),p("/community")};return e.jsxs("div",{className:"min-h-screen flex flex-col bg-gradient-to-b from-midnight-900 to-midnight-800",children:[e.jsxs(o.header,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"p-6 flex items-center justify-between glass-strong border-b border-white/10",children:[e.jsxs("div",{className:"font-semibold text-white flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:"✨"}),e.jsx("span",{children:"Souffleur de Rêves"})]}),e.jsxs("div",{className:"px-3 py-1.5 rounded-full glass border border-white/20 text-sm font-medium text-white",children:[t.length,"/5 émojis"]})]}),e.jsxs("main",{className:"flex-1 flex flex-col items-center justify-center gap-8 px-4 py-8",children:[e.jsxs(o.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.2},className:"relative w-full flex items-center justify-center",children:[e.jsx(W,{active:l,count:20,continuous:!0}),e.jsx(G,{emojis:ae,selected:t,setSelected:s,maxSelected:5,size:M,emojiSize:A}),e.jsx(o.button,{onClick:()=>S(!0),className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 w-16 h-16 rounded-full flex items-center justify-center bg-gradient-to-br from-white to-slate-100 text-slate-900 shadow-glow-lg border-2 border-white/70 hover:scale-110 transition-transform duration-300",animate:{scale:[1,1.08,1],boxShadow:["0 0 20px rgba(59,130,246,0.25), 0 0 40px rgba(147,51,234,0.15)","0 0 40px rgba(59,130,246,0.45), 0 0 60px rgba(147,51,234,0.25)","0 0 20px rgba(59,130,246,0.25), 0 0 40px rgba(147,51,234,0.15)"]},transition:{duration:2.4,repeat:1/0,ease:"easeInOut"},"aria-label":"Open Panthéon",title:"Voir le Panthéon",children:e.jsx("span",{className:"text-3xl",children:"✨"})})]}),e.jsx(o.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"w-full max-w-sm",children:e.jsx(o.button,{disabled:!l,whileHover:l?{scale:1.02}:{},whileTap:l?{scale:.98}:{},className:`w-full h-14 rounded-2xl font-semibold transition-all duration-300 ${l?"bg-gradient-to-r from-midnight-400 to-midnight-500 text-white hover:shadow-aurora shadow-lg":"glass text-slate-400 cursor-not-allowed border border-white/10"}`,onClick:()=>h("compose"),children:k})}),n==="compose"&&l&&e.jsxs(o.div,{id:"compose-area",ref:E,initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1},transition:{duration:.4},className:"w-full max-w-sm rounded-2xl bg-white text-slate-900 shadow-card-hover p-6 space-y-4",children:[e.jsx("div",{className:"text-3xl select-none mb-2 text-center",children:t.join(" ")}),m.length>0&&e.jsxs(o.div,{initial:{opacity:0},animate:{opacity:1},className:"rounded-xl border border-slate-200 p-4 bg-gradient-to-br from-slate-50 to-white",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:"text-sm font-medium text-slate-700 flex items-center gap-2",children:"💡 Inspiration"}),e.jsx(o.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>x(P(t.slice(0,3))),className:"text-xs px-3 py-1.5 rounded-lg border border-slate-300 bg-white text-slate-900 hover:bg-slate-50 font-medium shadow-sm",children:"↻ Refaire"})]}),e.jsx("ul",{className:"space-y-2 max-h-56 overflow-auto pr-1",children:m.map((a,c)=>e.jsxs(o.li,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:c*.1},className:"flex items-start gap-2 p-3 rounded-lg bg-white border border-slate-200 hover:border-slate-300 transition-colors",children:[e.jsx("pre",{className:"flex-1 whitespace-pre-wrap text-sm text-slate-800 leading-relaxed",children:a}),e.jsx(o.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>w(a.split(`
`).slice(0,3)),className:"self-start text-xs px-3 py-1.5 rounded-lg bg-gradient-to-r from-emerald-600 to-emerald-500 text-white hover:from-emerald-700 hover:to-emerald-600 font-medium shadow-sm","aria-label":"Utiliser cette suggestion",children:"Utiliser"})]},c))})]}),[0,1,2].map(a=>e.jsxs(o.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2+a*.1},className:"space-y-2",children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700",children:["Ligne ",a+1," ",e.jsxs("span",{className:"text-slate-400 font-normal",children:["(",a===1?"7":"5"," syllabes)"]})]}),e.jsx("textarea",{value:b[a],onChange:c=>w(b.map((N,y)=>y===a?c.target.value:N)),rows:2,className:"w-full rounded-xl border-2 border-slate-200 px-4 py-3 focus:outline-none focus:border-midnight-400 focus:ring-4 focus:ring-midnight-400/20 transition-all duration-300",placeholder:a===0?"Un rêve commence...":a===1?"L'émotion s'éveille...":"Le voyage continue..."})]},a)),u&&e.jsx(o.p,{initial:{opacity:0},animate:{opacity:1},className:"text-sm text-red-600 bg-red-50 border border-red-200 rounded-lg px-3 py-2",children:u}),e.jsx(o.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:L,className:"w-full h-14 rounded-xl bg-gradient-to-r from-emerald-600 to-emerald-500 text-white font-semibold hover:from-emerald-700 hover:to-emerald-600 shadow-lg hover:shadow-xl transition-all duration-300",children:"✨ Publier ma suggestion onirique"})]})]}),e.jsxs(o.footer,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.6},className:"p-4 text-center text-xs text-slate-400 glass-strong border-t border-white/10",children:["Prototype – animations ",e.jsx("span",{className:"font-mono text-slate-300",children:"Framer Motion"}),", layout ",e.jsx("span",{className:"font-mono text-slate-300",children:"Tailwind"})]}),e.jsx(X,{open:i,onClose:()=>S(!1)})]})}export{le as default};
