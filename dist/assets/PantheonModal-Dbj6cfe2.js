import{r as e,q as S,j as r,u as z,P as T,t as D,b as L,v as A,d as $,l as K,m as P}from"./index-BMx-jIoL.js";class q extends e.Component{getSnapshotBeforeUpdate(a){const s=this.props.childRef.current;if(s&&a.isPresent&&!this.props.isPresent){const o=this.props.sizeRef.current;o.height=s.offsetHeight||0,o.width=s.offsetWidth||0,o.top=s.offsetTop,o.left=s.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function F({children:l,isPresent:a}){const s=e.useId(),o=e.useRef(null),x=e.useRef({width:0,height:0,top:0,left:0}),{nonce:y}=e.useContext(S);return e.useInsertionEffect(()=>{const{width:m,height:t,top:f,left:n}=x.current;if(a||!o.current||!m||!t)return;o.current.dataset.motionPopId=s;const c=document.createElement("style");return y&&(c.nonce=y),document.head.appendChild(c),c.sheet&&c.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${m}px !important;
            height: ${t}px !important;
            top: ${f}px !important;
            left: ${n}px !important;
          }
        `),()=>{document.head.removeChild(c)}},[a]),r.jsx(q,{isPresent:a,childRef:o,sizeRef:x,children:e.cloneElement(l,{ref:o})})}const B=({children:l,initial:a,isPresent:s,onExitComplete:o,custom:x,presenceAffectsLayout:y,mode:m})=>{const t=z(H),f=e.useId(),n=e.useCallback(i=>{t.set(i,!0);for(const h of t.values())if(!h)return;o&&o()},[t,o]),c=e.useMemo(()=>({id:f,initial:a,isPresent:s,custom:x,onExitComplete:n,register:i=>(t.set(i,!1),()=>t.delete(i))}),y?[Math.random(),n]:[s,n]);return e.useMemo(()=>{t.forEach((i,h)=>t.set(h,!1))},[s]),e.useEffect(()=>{!s&&!t.size&&o&&o()},[s]),m==="popLayout"&&(l=r.jsx(F,{isPresent:s,children:l})),r.jsx(T.Provider,{value:c,children:l})};function H(){return new Map}const C=l=>l.key||"";function M(l){const a=[];return e.Children.forEach(l,s=>{e.isValidElement(s)&&a.push(s)}),a}const U=({children:l,custom:a,initial:s=!0,onExitComplete:o,presenceAffectsLayout:x=!0,mode:y="sync",propagate:m=!1})=>{const[t,f]=D(m),n=e.useMemo(()=>M(l),[l]),c=m&&!t?[]:n.map(C),i=e.useRef(!0),h=e.useRef(n),d=z(()=>new Map),[g,j]=e.useState(n),[p,w]=e.useState(n);L(()=>{i.current=!1,h.current=n;for(let v=0;v<p.length;v++){const u=C(p[v]);c.includes(u)?d.delete(u):d.get(u)!==!0&&d.set(u,!1)}},[p,c.length,c.join("-")]);const E=[];if(n!==g){let v=[...n];for(let u=0;u<p.length;u++){const b=p[u],k=C(b);c.includes(k)||(v.splice(u,0,b),E.push(b))}y==="wait"&&E.length&&(v=E),w(M(v)),j(n);return}const{forceRender:R}=e.useContext(A);return r.jsx(r.Fragment,{children:p.map(v=>{const u=C(v),b=m&&!t?!1:n===p||c.includes(u),k=()=>{if(d.has(u))d.set(u,!0);else return;let N=!0;d.forEach(I=>{I||(N=!1)}),N&&(R==null||R(),w(h.current),m&&(f==null||f()),o&&o())};return r.jsx(B,{isPresent:b,initial:!i.current||s?void 0:!1,custom:b?void 0:a,presenceAffectsLayout:x,mode:y,onExitComplete:b?void 0:k,children:v},u)})})};function O({open:l,onClose:a}){const[s,o]=e.useState([]),x=e.useRef(null),y=e.useRef(null),m=e.useRef(null);return e.useEffect(()=>{if(l){$();try{const t=[...K()].sort((f,n)=>(n.likes||0)-(f.likes||0)).slice(0,5);o(t)}catch{o([])}}},[l]),e.useEffect(()=>{if(!l){const i=m.current;i&&typeof i.focus=="function"&&setTimeout(()=>i.focus(),0),document.body.style.overflow="";return}m.current=document.activeElement,document.body.style.overflow="hidden";const t=["a[href]","area[href]","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])",'[tabindex]:not([tabindex="-1"])'].join(","),f=()=>{const i=x.current;if(!i)return;const h=Array.from(i.querySelectorAll(t)),d=y.current||h[0];d&&typeof d.focus=="function"&&d.focus()},n=i=>{if(l){if(i.key==="Escape"){i.preventDefault(),a==null||a();return}if(i.key==="Tab"){const h=x.current;if(!h)return;const d=Array.from(h.querySelectorAll(t)).filter(w=>w.offsetParent!==null);if(d.length===0)return;const g=d[0],j=d[d.length-1],p=document.activeElement;i.shiftKey?(p===g||!h.contains(p))&&(i.preventDefault(),j.focus()):(p===j||!h.contains(p))&&(i.preventDefault(),g.focus())}}},c=setTimeout(f,0);return window.addEventListener("keydown",n),()=>{clearTimeout(c),window.removeEventListener("keydown",n)}},[l,a]),r.jsx(U,{children:l&&r.jsxs(P.div,{className:"fixed inset-0 z-50 flex items-center justify-center",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[r.jsx("div",{className:"absolute inset-0 bg-slate-900/40 backdrop-blur-sm",onClick:a}),r.jsxs(P.div,{role:"dialog","aria-modal":"true","aria-labelledby":"pantheon-title",className:"relative z-10 w-[92vw] max-w-xl rounded-2xl bg-white text-slate-900 shadow-2xl p-6 md:p-8",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.97,opacity:0},transition:{type:"spring",stiffness:140,damping:16},ref:x,tabIndex:-1,children:[r.jsx("button",{onClick:a,className:"absolute right-4 top-4 h-9 w-9 rounded-full bg-slate-100 hover:bg-slate-200 active:bg-slate-300 transition flex items-center justify-center","aria-label":"Close",ref:y,children:"√ó"}),r.jsxs("div",{className:"mb-4 flex items-center gap-2",children:[r.jsx("span",{className:"text-2xl",children:"üèõÔ∏è"}),r.jsx("h2",{id:"pantheon-title",className:"text-xl font-semibold",children:"Panth√©on ‚Äì Top 5 de la semaine"})]}),r.jsx("ul",{className:"space-y-4",children:s.map(t=>r.jsxs("li",{className:"rounded-xl border border-slate-200 p-4 hover:shadow-md transition",children:[r.jsxs("div",{className:"flex items-start justify-between gap-3",children:[r.jsx("div",{className:"flex items-center gap-2 text-xl",children:t.emojis.map((f,n)=>r.jsx("span",{children:f},n))}),r.jsxs("div",{className:"text-sm text-slate-600",children:["‚ù§Ô∏è ",t.likes]})]}),r.jsx("pre",{className:"mt-2 whitespace-pre-wrap font-sans text-slate-800 leading-relaxed",children:t.text}),r.jsxs("div",{className:"mt-2 text-sm text-slate-500",children:["‚Äî ",t.author]})]},t.id))})]})]})})}export{O as P};
