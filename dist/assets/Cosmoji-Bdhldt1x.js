import{r as c,j as e,m as i,c as f,d as y,o as N,p as k,q as w}from"./index-BBdapSLE.js";import{P as v}from"./PantheonModal-ptEOK_sE.js";import{S as M,E as S}from"./SelectionPanel-CaPdFs7Z.js";import{u as h}from"./use-reduced-motion-1uMDcJhY.js";import"./index-CqGXxBgE.js";function C({size:o=28,className:d=""}){const a=o,n=Math.max(2,Math.round(o/14)),s=c.useMemo(()=>({root:{width:a,height:a},ring:{borderWidth:n},dot:{fontSize:Math.round(a*.42),left:Math.round(a*.32),top:Math.round(a*.3)},degree:{fontSize:Math.round(a*.36),left:Math.round(a*.58),top:Math.round(a*.08)},sparkle1:{right:-Math.round(a*.14),top:Math.round(a*.35)},sparkle2:{right:-Math.round(a*.28),top:-Math.round(a*.06)},sparkle3:{right:-Math.round(a*.04),bottom:-Math.round(a*.02)}}),[a,n]);return e.jsxs("span",{className:`relative inline-block align-middle cosmoji-emblem ${d}`,style:s.root,"aria-hidden":"true",children:[e.jsx("style",{children:`
        .cosmoji-emblem .cosmoji-ring { 
          position: absolute; inset: 0; border-radius: 9999px; 
          border-style: solid; border-color: rgba(2, 6, 23, 0.2); /* slate-950/20 on white */
          box-shadow: 0 0 0 1px rgba(15, 23, 42, 0.06) inset;
          background: radial-gradient(closest-side, rgba(2,6,23,0.02), transparent);
        }
        .dark .cosmoji-emblem .cosmoji-ring {
          border-color: rgba(255,255,255,0.25);
          box-shadow: 0 0 0 1px rgba(255,255,255,0.06) inset;
          background: radial-gradient(closest-side, rgba(255,255,255,0.04), transparent);
        }
        .cosmoji-emblem .glyph { position: absolute; line-height: 1; color: #0f172a; opacity: 0.9; }
        .dark .cosmoji-emblem .glyph { color: #e2e8f0; }

        .cosmoji-emblem .sparkle { 
          position: absolute; color: #0891b2; /* cyan-700 */
          filter: drop-shadow(0 0 2px rgba(34,211,238,0.6));
          animation: cosmoji-sparkle 2.4s ease-in-out infinite;
          transform-origin: left center;
          font-size: ${Math.max(10,Math.round(a*.34))}px;
          opacity: 0;
        }
        .cosmoji-emblem .sparkle:nth-of-type(1) { animation-delay: 0s; }
        .cosmoji-emblem .sparkle:nth-of-type(2) { animation-delay: 0.6s; color: #06b6d4; }
        .cosmoji-emblem .sparkle:nth-of-type(3) { animation-delay: 1.2s; color: #22d3ee; }

        @keyframes cosmoji-sparkle {
          0%   { transform: translateX(0px) scale(0.6) rotate(0deg); opacity: 0; }
          10%  { opacity: 0.9; }
          45%  { transform: translateX(${Math.round(a*.38)}px) scale(1) rotate(12deg); opacity: 0.85; }
          70%  { opacity: 0.3; }
          100% { transform: translateX(${Math.round(a*.7)}px) scale(0.9) rotate(22deg); opacity: 0; }
        }
        @media (prefers-reduced-motion: reduce) {
          .cosmoji-emblem .sparkle { animation: none; opacity: 0.25; }
        }
      `}),e.jsx("span",{className:"cosmoji-ring",style:s.ring}),e.jsx("span",{className:"glyph",style:s.dot,children:"•"}),e.jsx("span",{className:"glyph",style:s.degree,children:"°"}),e.jsx("span",{className:"sparkle",style:s.sparkle1,children:"✦"}),e.jsx("span",{className:"sparkle",style:s.sparkle2,children:"✦"}),e.jsx("span",{className:"sparkle",style:s.sparkle3,children:"✦"})]})}function E({active:o=!1,height:d=240,opacity:a=.6}){const n=h(),s=n?{duration:0}:{duration:12,repeat:1/0,ease:"easeInOut",repeatType:"mirror"};return e.jsx("div",{className:"pointer-events-none absolute inset-x-0 top-0 -z-10 overflow-hidden",style:{height:d},"aria-hidden":!0,children:e.jsxs(i.div,{initial:{opacity:0},animate:{opacity:o?a:0},transition:{duration:n?0:.6,ease:"easeOut"},className:"absolute inset-0",children:[e.jsx(i.span,{className:"absolute -inset-x-10 -top-10 h-[200%] mix-blend-screen",style:{background:"linear-gradient(120deg, rgba(52,211,153,0.55), rgba(45,212,191,0.35) 40%, rgba(59,130,246,0.30) 70%, rgba(167,139,250,0.25))",filter:"blur(48px)"},initial:!1,animate:n?{x:0}:{x:[-40,40,-40]},transition:{...s,duration:16}}),e.jsx(i.span,{className:"absolute -inset-x-20 top-0 h-[180%] mix-blend-screen",style:{background:"linear-gradient(100deg, rgba(56,189,248,0.42), rgba(99,102,241,0.28))",filter:"blur(56px)"},initial:!1,animate:n?{x:0}:{x:[30,-30,30]},transition:{...s,duration:20}}),e.jsx(i.span,{className:"absolute -inset-x-24 -top-12 h-[200%] mix-blend-screen",style:{background:"linear-gradient(140deg, rgba(244,114,182,0.18), rgba(192,132,252,0.18))",filter:"blur(72px)"},initial:!1,animate:n?{x:0}:{x:[-20,20,-20]},transition:{...s,duration:24}})]})})}function I(){const[o,d]=c.useState(!1),[a,n]=c.useState({occurrences:[],pairs:[],triples:[]}),[s,m]=c.useState([]),b=f(),x=h();c.useEffect(()=>{y(),n(N())},[]);const g=r=>{m(t=>t.includes(r)?t.filter(p=>p!==r):t.length>=3?t:[...t,r])},j=()=>{s.length===3&&(w(s),b("/guardian"))};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(i.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"rounded-2xl glass-strong border border-white/20 shadow-card p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(C,{size:32}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Explorer le Cosmoji"}),e.jsx("p",{className:"text-slate-300 text-sm",children:"Visualisation des tendances et associations d'émojis"})]})]}),e.jsx("div",{className:"rounded-xl bg-white/10 border border-white/20 p-4",children:e.jsxs("p",{className:"text-slate-200 text-sm leading-relaxed",children:["💡 ",e.jsx("strong",{children:"Mode exploration :"})," Cette page vous permet de visualiser les connexions entre émojis de la communauté. Vous pouvez aussi sélectionner 3 émojis pour rencontrer directement un gardien."]})})]}),e.jsx(i.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:e.jsx(M,{selected:s,maxSelection:3,onClear:()=>m([])})}),e.jsxs(i.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"relative rounded-2xl bg-black text-white shadow-lg p-6",children:[e.jsx(E,{active:s.length===3}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-white mb-1",children:"Réseau d'associations"}),e.jsx("p",{className:"text-sm text-slate-300",children:"Taille du cercle = popularité • Épaisseur des liens = co-occurrences"})]}),e.jsx("button",{onClick:()=>d(!0),className:"rounded-xl bg-slate-900 text-white px-4 py-2 hover:bg-slate-800 transition-colors duration-200",children:"Panthéon"})]}),e.jsx("div",{className:"mb-4 flex flex-wrap gap-2 text-xs",children:[{element:"air",color:"#22d3ee",label:"Air"},{element:"water",color:"#60a5fa",label:"Eau"},{element:"fire",color:"#f59e0b",label:"Feu"},{element:"earth",color:"#86efac",label:"Terre"},{element:"ice",color:"#93c5fd",label:"Glace"},{element:"aurora",color:"#34d399",label:"Aurore"}].map(({element:r,color:t,label:l})=>e.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1 rounded-lg bg-slate-800 border border-slate-700",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:t}}),e.jsx("span",{className:"text-slate-200",children:l})]},r))}),e.jsx("div",{className:"rounded-xl border-2 border-slate-800 overflow-hidden mb-4",children:e.jsx(S,{stats:a,selectable:!0,selected:s,onToggle:g,maxNodes:30,maxLinks:200,glow:!0,getNodeColor:(r,t)=>{const l=k(r);if(!l)return;const u={air:{base:"#22d3ee",dark:"#0891b2"},water:{base:"#60a5fa",dark:"#2563eb"},fire:{base:"#f59e0b",dark:"#d97706"},earth:{base:"#86efac",dark:"#16a34a"},ice:{base:"#93c5fd",dark:"#3b82f6"},aurora:{base:"#34d399",dark:"#10b981"},light:{base:"#f5d0fe",dark:"#e879f9"},animal:{base:"#fca5a5",dark:"#ef4444"}}[l.element]||{base:"#0ea5e9",dark:"#0284c7"};return{fill:t?u.base:"#0ea5e9",stroke:t?u.dark:"#0ea5e9",fillOpacity:t?.85:.12,strokeOpacity:t?1:.45}}})}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-slate-800",children:[e.jsx("div",{className:"text-sm text-slate-300",children:s.length===0?e.jsx("span",{className:"text-slate-400 italic",children:"Cliquez sur 3 émojis pour créer votre trio cosmique"}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"font-medium",children:"Sélection :"})," ",e.jsx("span",{className:"font-mono text-xl ml-2",children:s.join(" ")}),e.jsxs("span",{className:"ml-2 text-xs text-slate-500",children:["(",s.length,"/3)"]})]})}),e.jsx(i.button,{onClick:j,disabled:s.length!==3,whileHover:s.length===3?{scale:1.02}:{},whileTap:s.length===3?{scale:.98}:{},animate:s.length===3&&!x?{boxShadow:["0 4px 6px rgba(16, 185, 129, 0.3)","0 8px 16px rgba(16, 185, 129, 0.5)","0 4px 6px rgba(16, 185, 129, 0.3)"]}:{},transition:s.length===3&&!x?{duration:2.4,repeat:1/0,ease:"easeInOut"}:{duration:.2},className:`rounded-xl px-6 py-3 font-semibold transition-all duration-300 ${s.length===3?"bg-gradient-to-r from-emerald-500 to-cyan-500 text-white shadow-lg":"bg-slate-800 text-slate-500 cursor-not-allowed"}`,children:s.length===3?"✧ Entrer en résonance":`Choisir ${3-s.length} émoji(s)`})]})]}),e.jsxs(i.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"rounded-2xl bg-white text-slate-900 shadow-lg p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center",children:e.jsx("span",{className:"text-xl",children:"📊"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Tendances de la communauté"}),e.jsx("p",{className:"text-sm text-slate-600",children:"Les combinaisons les plus populaires"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxs("section",{className:"rounded-xl bg-gradient-to-br from-blue-50 to-cyan-50 border border-blue-200 p-4",children:[e.jsxs("h3",{className:"text-sm font-semibold text-blue-700 mb-3 flex items-center gap-2",children:[e.jsx("span",{children:"⭐"})," Top émojis"]}),e.jsx("ul",{className:"space-y-2",children:a.occurrences.slice(0,8).map(({items:r,count:t},l)=>e.jsxs("li",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-2xl select-none",children:r[0]}),e.jsx("span",{className:"font-medium text-blue-600 bg-blue-100 px-2 py-0.5 rounded-full text-xs",children:t})]},l))})]}),e.jsxs("section",{className:"rounded-xl bg-gradient-to-br from-purple-50 to-pink-50 border border-purple-200 p-4",children:[e.jsxs("h3",{className:"text-sm font-semibold text-purple-700 mb-3 flex items-center gap-2",children:[e.jsx("span",{children:"🔗"})," Top paires"]}),e.jsx("ul",{className:"space-y-2",children:a.pairs.slice(0,8).map(({items:r,count:t},l)=>e.jsxs("li",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-xl select-none",children:r.join(" ")}),e.jsx("span",{className:"font-medium text-purple-600 bg-purple-100 px-2 py-0.5 rounded-full text-xs",children:t})]},l))})]}),e.jsxs("section",{className:"rounded-xl bg-gradient-to-br from-emerald-50 to-green-50 border border-emerald-200 p-4",children:[e.jsxs("h3",{className:"text-sm font-semibold text-emerald-700 mb-3 flex items-center gap-2",children:[e.jsx("span",{children:"✨"})," Top triplets"]}),e.jsx("ul",{className:"space-y-2",children:a.triples.slice(0,8).map(({items:r,count:t},l)=>e.jsxs("li",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-lg select-none",children:r.join(" ")}),e.jsx("span",{className:"font-medium text-emerald-600 bg-emerald-100 px-2 py-0.5 rounded-full text-xs",children:t})]},l))})]})]})]}),e.jsx(v,{open:o,onClose:()=>d(!1)})]})}export{I as default};
